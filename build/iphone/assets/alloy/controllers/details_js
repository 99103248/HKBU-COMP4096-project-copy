function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(i){if(!i||!i.fromAdapter){e.opts||{};for(var s=t(n),o=s.length,a=[],l=0;o>l;l++){var _=s[l];_.__transform={};var d=Ti.UI.createTableViewRow({layout:"vertical",height:"100%"});a.push(d);var c=Ti.UI.createImageView({image:"undefined"!=typeof _.__transform.images?_.__transform.images:_.get("images"),height:"350dp",width:"250dp",top:"25dp"});d.add(c);var h=Ti.UI.createLabel({text:"undefined"!=typeof _.__transform.name?_.__transform.name:_.get("name")});d.add(h);var u=Ti.UI.createLabel({text:"undefined"!=typeof _.__transform.price?_.__transform.price:_.get("price")});d.add(u);var p=Ti.UI.createLabel({text:"undefined"!=typeof _.__transform.info?_.__transform.info:_.get("info")});d.add(p)}r.__views.__alloyId15.setData(a)}}function t(e){return e.where({id:a.pid})}function i(e){var t=Alloy.Collections.items,i=t.toJSON();e=i[a.pid-1];var s=e.number,o=r.textarea.value;if(isNaN(o)||""==o||"0"==o)alert("Please input a number 1-9!");else if(o>s)alert("Not enough goods in the storage!!");else{var n=Alloy.createModel("cart",{item_id:e.id,item_name:e.name,item_price:e.price,item_number:o,total_price:e.price*o});Alloy.Collections.cart.add(n),n.save(),alert("Item Added to cart!")}}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="details",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var r=this,s={},o={};Alloy.Collections.instance("items"),r.__views.details=Ti.UI.createWindow({backgroundColor:"white",id:"details"}),r.__views.details&&r.addTopLevelView(r.__views.details),r.__views.__alloyId15=Ti.UI.createTableView({id:"__alloyId15"}),r.__views.details.add(r.__views.__alloyId15);var n=Alloy.Collections.items||items;n.on("fetch destroy change add remove reset",e),r.__views.__alloyId29=Ti.UI.createLabel({text:"Please input the number from 1 to 9",top:"80%",id:"__alloyId29"}),r.__views.details.add(r.__views.__alloyId29),r.__views.textarea=Ti.UI.createTextArea({id:"textarea",textAlign:"center",borderColor:"#000",width:"20dp",top:"85%",maxLength:"1"}),r.__views.details.add(r.__views.textarea),r.__views.__alloyId30=Ti.UI.createButton({title:"Add to cart",top:"90%",width:"100dp",height:"50dp",id:"__alloyId30"}),r.__views.details.add(r.__views.__alloyId30),i?r.addListener(r.__views.__alloyId30,"click",i):o["$.__views.__alloyId30!click!addItem"]=!0,s.destroy=function(){n.off("fetch destroy change add remove reset",e)},_.extend(r,r.__views);var a=arguments[0]||{};console.log(a.pid),Alloy.Collections.items.fetch(),o["$.__views.__alloyId30!click!addItem"]&&r.addListener(r.__views.__alloyId30,"click",i),_.extend(r,s)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;